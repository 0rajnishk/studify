<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form</title>
    <link rel="stylesheet" href="style.css" />

    <style>
      /* form styles */
      form {
        max-width: 500px;
        margin: 30px auto;
        background-color: #fff;
        padding: 40px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        border-radius: 5px;
      }

      form label {
        display: block;
        font-size: 16px;
        color: #555;
        margin-bottom: 8px;
      }

      form input[type="text"],
      form input[type="tel"],
      form input[type="email"],
      form select {
        display: block;
        width: 100%;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
        margin-bottom: 16px;
        font-size: 16px;
        color: #555;
      }

      form input[type="submit"] {
        background-color: #4caf50;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        padding: 12px 20px;
        font-size: 16px;
        margin-top: 16px;
        transition: background-color 0.3s ease-in-out;
      }

      form input[type="submit"]:hover {
        background-color: #3e8e41;
      }

      /* error message styles */
      .error {
        color: red;
        font-size: 14px;
        margin-bottom: 10px;
      }
      .subjects-group {
        margin-bottom: 20px;
      }

      .subjects-group label {
        display: inline-block;
        margin-right: 10px;
        margin-bottom: 10px;
        font-size: 16px;
        color: #666;
      }

      .subjects-group input[type="checkbox"] {
        display: none;
      }

      .subjects-group input[type="checkbox"] + label {
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 3px;
        background-color: #fff;
        padding: 6px 12px;
        cursor: pointer;
      }

      .subjects-group input[type="checkbox"]:checked + label {
        background-color: #333;
        color: #fff;
      }

      /* success message styles */
      .success {
        color: green;
        font-size: 14px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <form method="POST" action="/submit-form">
        <h1>Registration Form</h1>
        <input
          type="hidden"
          name="id"
          value="{{ session['profile']['email'].split('@')[0] }}"
        />
        <div class="form-group">
          <label for="name">Name:</label>
          <input type="text" name="name" id="name" required />
        </div>

        <div class="subjects-group">
          <label for="whatsapp_number">WhatsApp Number:</label>
          <input
            type="tel"
            name="whatsapp_number"
            id="whatsapp_number"
            required
          />
        </div>
        <div class="city-group">
          <label for="state">State:</label>
          <select name="state" id="state" required>
            <option value="">Select a state</option>
          </select>
        </div>
        <h2>Choose courses</h2>
        {% for level, courses in data.items() %} {% if level =="diploma" or
        level == "foundation" or level == "degree" %}
        <h3>{{level}}</h3>
        <div class="subjects-group">
          {% for course_code, course_data in courses.items() %}
          <input
            type="checkbox"
            id="{{ level }}-{{ course_code }}"
            name="subject"
            value="{{ course_code }}"
            style="display: none"
          />

          <label for="{{ level }}-{{ course_code }}"
            >{{ course_data["course_name"] }}</label
          >
          {% endfor %}
        </div>
        {% endif %} {% endfor %}

        <div class="form-group">
          <input type="submit" value="Submit" class="btn" />
        </div>
      </form>
    </div>
    <script>
      // Get the state dropdown list
      const stateDropdown = document.getElementById("state");

      // Populate the dropdown list with the list of states
      const states = [
        "Andhra Pradesh",
        "Arunachal Pradesh",
        "Assam",
        "Bihar",
        "Chhattisgarh",
        "Goa",
        "Gujarat",
        "Haryana",
        "Himachal Pradesh",
        "Jharkhand",
        "Karnataka",
        "Kerala",
        "Madhya Pradesh",
        "Maharashtra",
        "Manipur",
        "Meghalaya",
        "Mizoram",
        "Nagaland",
        "Odisha",
        "Punjab",
        "Rajasthan",
        "Sikkim",
        "Tamil Nadu",
        "Telangana",
        "Tripura",
        "Uttar Pradesh",
        "Uttarakhand",
        "West Bengal",
        "none of these",
      ];

      states.forEach((state) => {
        const option = document.createElement("option");
        option.value = state;
        option.text = state;
        stateDropdown.appendChild(option);
      });

      // limit the number of selected subjects to 4
      var checkboxes = document.querySelectorAll('input[type="checkbox"]');
      var maxSubjects = 4;
      for (var i = 0; i < checkboxes.length; i++) {
        checkboxes[i].onclick = function () {
          var checkedCount = document.querySelectorAll(
            'input[type="checkbox"]:checked'
          ).length;
          if (checkedCount > maxSubjects) {
            alert("You can only select up to " + maxSubjects + " subjects");
            this.checked = false;
          }
        };
      }
    </script>
  </body>
</html>
